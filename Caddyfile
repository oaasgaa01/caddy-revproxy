# The Caddyfile is an easy way to configure your Caddy web server.
#
# Unless the file starts with a global options block, the first
# uncommented line is always the address of your site.
#
# To use your own domain name (with automatic HTTPS), first make
# sure your domain's A/AAAA DNS records are properly pointed to
# this machine's public IP, then replace the line below with your
# domain name.
# :80
aasgaards.no

# Set this path to your site's directory.
# root * /usr/share/caddy

# Enable the static file server.
# file_server

# Another common task is to set up a reverse proxy:
# reverse_proxy localhost:8080

route /recipes* {
    uri strip_prefix /recipes
    reverse_proxy   192.168.1.111:16111 192.168.1.111:16112  {
        lb_policy   round_robin
    }
}


#route /recipes* {
#    uri strip_prefix /recipes
#    reverse_proxy   192.168.1.50:16104 192.168.1.60:16104  {
#        lb_policy   round_robin
#    }
#}

route /caddy* {
        uri strip_prefix /caddy
        reverse_proxy 192.168.1.50:16102
}

reverse_proxy / http://192.168.1.50:16104 http://192.168.1.60:16104 {
        # lb_policy       round_robin
}



# Or serve a PHP site through php-fpm:
# php_fastcgi localhost:9000

# Refer to the Caddy docs for more information:
# https://caddyserver.com/docs/caddyfile
